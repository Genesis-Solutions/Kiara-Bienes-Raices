<%- include('partials/head') %>

<body style="font-family: 'Montserrat', sans-serif">

    <%- include('partials/navbar') %>
    
    <% for (let inmueble of inmuebles) { %>

        <div class="py-5 lg:py-10 px-8">
            <h1 class="text-4xl font-bold"><%= inmueble.nombreInmueble %></h1>
            <hr class="h-px my-3 bg-gray-800 border-0">
            <!-- Photo Carousel sm screens -->
            <div id="controls-carousel" class="relative w-full mt-4 md:hidden" data-carousel="static">
                <!-- Carousel wrapper -->
                <div class="relative rounded-lg h-72 overflow-hidden">
                    <div class="duration-700 ease-in-out" data-carousel-item="active">
                        <img src="/inmueble/get_bucket_img?image=<%=fotos[0]%>" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="<%=fotos[0]%>">
                    </div>
                    <% for (let i=1; i < fotos.length; i++) { %>
                        <div class="hidden duration-700 ease-in-out" data-carousel-item>
                            <img src="/inmueble/get_bucket_img?image=<%=fotos[i]%>" class="absolute block w-full -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="<%=fotos[0]%>">
                        </div>
                    <%}%>
                    <!-- Item 5 -->
                    <div class="flex items-center justify-center duration-700 ease-in-out" data-carousel-item>
                        <img src="/inmueble/get_bucket_img?image=<%=fotos[0]%>" class="absolute block w-full brightness-50 -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2" alt="img5">
                        <a href="<%=inmueble.linkVideoInmueble%>" class="absolute px-5 py-2 rounded-full text-base bg-white font-medium text-gray-800 hover:font-medium hover:text-white hover:bg-gray-700">
                            <i class="fa-solid fa-play"></i> 
                            Video
                        </a>
                    </div>
                </div>
                <!-- Slider controls -->
                <button type="button" class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-prev>
                    <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                        <svg aria-hidden="true" class="w-6 h-6 text-white dark:text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                        <span class="sr-only">Previous</span>
                    </span>
                </button>
                <button type="button" class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none" data-carousel-next>
                    <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 dark:bg-gray-800/30 group-hover:bg-white/50 dark:group-hover:bg-gray-800/60 group-focus:ring-4 group-focus:ring-white dark:group-focus:ring-gray-800/70 group-focus:outline-none">
                        <svg aria-hidden="true" class="w-6 h-6 text-white dark:text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        <span class="sr-only">Next</span>
                    </span>
                </button>
            </div>
            
            <!-- Photo Album md and lg screens -->
            <div class="md:mt-5 lg:mt-10 md:grid md:grid-cols-2 h-96 md:gap-2 hidden">
                <div class="cursor-pointer hover:scale-105 transition duration-150 h-96 w-full">
                    <img src="/inmueble/get_bucket_img?image=<%=fotos[0]%>" class="rounded-l-lg object-cover h-full w-full " alt="Imagen principal">
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <% for (let i=1; i < 4; i++) { %>
                        <div class="cursor-pointer hover:scale-105 transition duration-150 h-48">
                            <img src="/inmueble/get_bucket_img?image=<%=fotos[i]%>" class="object-cover h-full w-full" alt="Imagen de inmueble 4">
                        </div>
                    <%}%>
                    <div class="flex items-center justify-center cursor-pointer hover:scale-105 transition duration-150">
                        <img src="/inmueble/get_bucket_img?image=<%=fotos[0]%>" class="-z-10 brightness-50 relative rounded-br-lg object-none h-48 w-full" alt="Imagen de inmueble 5">
                        <a href="<%=inmueble.linkVideoInmueble%>" class="absolute px-5 py-2 rounded-full text-base bg-white font-medium text-gray-800 hover:font-medium hover:text-white hover:bg-gray-700">
                            <i class="fa-solid fa-play"></i> 
                            Video
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Information Form -->

        <form id="cuerpoInmueble" name="cuerpoInmueble" action="/dashboard/alta/inmueble/cuerpoCasa/<%=inmueble.idInmueble%>" method="POST">

            <!-- Información General -->

            <div class="px-10 pb-12 grid grid-cols-2 space-x-8">
                <div class="space-y-2">
                    <label for="titulo" class="text-lg font-semibold">Título</label>
                    <input
                        class="h-10 px-5 bg-white w-full rounded-lg border border-gray-300 text-sm focus:outline-none focus:border-gray-800 focus:ring-gray-800"
                        type="text" id="titulo" name="titulo" value="<%=inmueble.nombreInmueble%>" placeholder="<%=inmueble.nombreInmueble%>" maxlength="30" required/>
                </div>
                <div class="space-y-2">
                    <label for="linkVideo" class="text-lg font-semibold">Enlace al Vídeo de Youtube</label>
                    <input
                        class="h-10 px-5 bg-white w-full rounded-lg border border-gray-300 text-sm focus:outline-none focus:border-gray-800 focus:ring-gray-800"
                        type="text" id="linkVideo" name="linkVideo" value="<%=inmueble.linkVideoInmueble%>" placeholder="<%=inmueble.linkVideoInmueble%>" required/>
                </div>
            </div>

            <!-- Detalles -->

            <% if (inmueble.idCategoria == 1) { %>
                <%- include('partials/formsInmuebles/modificarCasaDepartamento', {inmueble: inmueble}) %>
            <% } else if (inmueble.idCategoria == 2) { %>
                <%- include('partials/formsInmuebles/modificarCasaDepartamento', {inmueble: inmueble}) %>
            <% } else if (inmueble.idCategoria == 3) { %>
                <%- include('partials/formsInmuebles/modificarLocal', {inmueble: inmueble}) %>
            <% } else if (inmueble.idCategoria == 4) { %>
                <%- include('partials/formsInmuebles/modificarTerreno', {inmueble: inmueble}) %>
            <% } else if (inmueble.idCategoria == 5) { %>
                <%- include('partials/formsInmuebles/modificarBodega', {inmueble: inmueble}) %>
            <% } else if (inmueble.idCategoria == 6) { %>
                <%- include('partials/formsInmuebles/modificarOficina', {inmueble: inmueble}) %>
            <% } else if (inmueble.idCategoria == 7) { %>
                <%- include('partials/formsInmuebles/modificarOtro', {inmueble: inmueble}) %>
            <% } %>  

            <!-- Dirección Inmueble -->

            <div class="p-10 flex justify-center">
                <div class="grid grid-cols-2 space-x-5 gap-8">
                    <div class="space-y-5">
                        <div class="space-y-2">
                            <label for="titulo" class="text-lg font-semibold">Dirección de la Propiedad</label>
                            <input
                                class="h-10 px-5 bg-white w-full rounded-lg border border-gray-300 text-sm focus:outline-none focus:border-gray-800 focus:ring-gray-800"
                                type="text" id="titulo" name="titulo" placeholder="Condesa de Barry 305" maxlength="30" required/>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <label for="titulo" class="text-lg font-semibold">Link de “Embed a Map” en Google Maps</label>
                        <input
                            class="h-10 px-5 bg-white w-full rounded-lg border border-gray-300 text-sm focus:outline-none focus:border-gray-800 focus:ring-gray-800"
                            type="text" id="titulo" name="titulo" placeholder="iframe src='https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12617.262388400684!2d-100.4082022221727!3d20.611509759670554!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85d35ae83751a45d%3A0x4fa6ee69f6b64f3a!2sTecnol%C3%B3gico%20de%20Monterrey!5e0!3m2!1ses-419!2smx!4v1682632411233!5m2!1ses-419!2smx'" maxlength="30" required/>
                    </div>
                    
                </div>
            </div>
        </form>

        <!-- Buttons Section -->

        <div class="px-10 pb-12 flex justify-evenly">
            <button class="px-5 py-2 w-1/3 rounded-lg text-base text-white font-medium bg-red-600 hover:font-medium hover:bg-red-700">
                Cancelar
            </button>
            <button class="px-5 py-2 w-1/3 rounded-lg text-base text-white font-medium bg-gray-800 hover:font-medium hover:bg-gray-700 btnSubmit">
                Registrar
            </button>
        </div>
    <% } %>

    <!-- Enlazar con la biblioteca de jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.2/locale/es.js"></script>

    <script>
        function enviarFormulario(e){
            e.preventDefault();
        }
    </script>

    <script type="text/javascript">   
        $(document).on("click", ".btnSubmit", function(){		            
            $("#cuerpoInmueble").submit();
        });
    </script>
            <script type="text/javascript">
            $(document).ready(function(){
        $('.form-checkbox').change(function(){
            if($(this).is(':checked')){
            $('.form-checkbox').not(this).prop('disabled',true);
            }
            else{
            $('.form-checkbox').prop('disabled',false);
            }
        });
        });

    </script>

    <%- include("partials/footer") %>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.5/flowbite.min.js"></script>

</body>
</html>